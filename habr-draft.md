# Как собрать разрозненный рекламный бизнес в одну «мастер-сделку»

> **TL;DR**  
> В статье — про концепцию **Master-Deal**: как сделать из CRM, рекламных кабинетов и биллинга не три разных мира, а единую воронку с понятной маржинальностью, сквозным sales-pipeline и прозрачным SLA. Текст ориентирован на бизнес, но с достаточной глубиной, чтобы было интересно архитекторам, продактовладельцам и разработчикам.

---

## Кому может быть полезна эта статья

- **Руководителям бизнеса и продуктам**, которые хотят:
    - лучше понимать доходность рекламных инициатив;
    - меньше зависеть от «ручных сводок» и локальных Excel.
- **Директорам по маркетингу / Head of Digital**, которым важно:
    - видеть цельную картину по кампаниям в разных системах;
    - управлять воронкой и SLA между отделами, а не только внутри одного департамента.
- **Архитекторам и разработчикам**, перед которыми ставят задачу «сделать сквозную аналитику и всё связать», но при этом не хочется превратить ландшафт в набор разрозненных интеграций.

---

## Бизнес-проблема: реклама как лоскутное одеяло

Типичный ландшафт рекламного бизнеса:

- **CRM**
    - сделки, договоры, счета, акты;
    - статусы согласований и оплат;
    - своя воронка (lead → opportunity → contract → …).
- **Рекламные платформы**
    - кампании, группы, креативы;
    - бюджеты, показы, клики;
    - своя воронка (draft → running → paused → finished).
- **Биллинг / ERP**
    - проводки, закрытие периода;
    - своя логика статусов документов.
- **BI / DWH**
    - отчёты «как сумели собрать»;
    - зачастую — ещё одна отдельная логика статусов и атрибутов.

Проблемы начинаются, когда **процессы запускаются параллельно в разных системах**:

- аккаунт уже двигает сделку по воронке в CRM;
- медиапланер запускает кампании в рекламных системах;
- бухгалтерия выставляет и закрывает документы;
- BI собирает свою статистику.

Каждое действие порождает **сырые бизнес-события**:

- `deal_stage_changed`,
- `campaign_started`,
- `invoice_issued`,
- `payment_received`,
- `budget_updated`,
  и т.д.

Все эти события:

- живут в разных терминах;
- приходят в разное время;
- иногда противоречат друг другу по смыслу (например, по датам и суммам).

В результате:

- у каждого участника процесса **своя картинка происходящего**;
- управлять становится сложно: разные воронки, разные даты, разные цифры.

Бизнесу же нужен один простой ответ:

> «Что происходит с конкретной инициативой для клиента:  
> на каком она этапе, какие обязательства мы взяли и сколько на ней заработаем?»

---

## Идея: Master-Deal как единый бизнес-объект

Чтобы перестать смотреть на бизнес через набор отдельных сущностей, вводим **Master-Deal** (мастер-сделку) — верхнеуровневый бизнес-объект, который объединяет:

- **Клиента и договор(ы)**  
  Юридическая сторона: кто с кем и о чём договорился.
- **Медиаплан**  
  Каналы, форматы, бюджеты, KPI, сроки.
- **Кампании в рекламных платформах**  
  Все внешние «кусочки» размещения: VK, MyTarget, Google, собственные DSP и т.п.
- **Финансовый контур**  
  Плановые и фактические доходы/расходы по инициативе.
- **Историю изменений**  
  Как менялись бюджет, план, сроки, состав кампаний.

Дополнительно Master-Deal:

- становится **«корневым» идентификатором инициативы** — всё важное привязывается к нему;
- задаёт **общий контекст для всех систем**:
    - CRM знает, к какой мастер-сделке относится договор,
    - рекламные платформы — к какой мастер-сделке относятся кампании,
    - биллинг — какие документы закрывают именно эту инициативу.

Master-Deal превращает разрозненные куски в:

> одну управляемую единицу — «инициатива клиента X в период Y с целью Z».

То есть Master-Deal — это слой над всеми сущностями, с которыми бизнес реально работает:
> «Осенний перформанс для ритейл-клиента N в 2025 году» —
это одна Master-Deal, даже если под ней 15 кампаний в 4-х рекламных системах и несколько договоров.

---

## Канонизация бизнес-событий: что это и зачем

Когда процессы живут параллельно, компания получает поток сырых событий:

- из CRM — про сделки и статусы согласования;
- из рекламных систем — про кампании, бюджеты, показы;
- из биллинга — про выставление и оплату счетов;
- из внутренних инструментов — про задачи, согласования, комментарии.

Каждое событие описано **языком своей системы**. Для бизнеса это выглядит так, будто каждый участник разговаривает на своём диалекте.

**Канонизация бизнес-событий** — это процесс, в котором:

1. Мы описываем **каноническую модель событий**:
    - `MasterDealCreated`,
    - `MediaPlanApproved`,
    - `CampaignLaunched`,
    - `BudgetReallocated`,
    - `MasterDealClosed`,
    - и т.д.

2. Для каждого сырого события из системы:
    - определяем, к какому каноническому событию оно относится;
    - нормализуем данные (формат дат, деньги, идентификаторы);
    - привязываем к конкретной Master-Deal.

3. Строим **сквозную историю инициативы**:
    - без дубликатов;
    - без «конфликтующих версий» одной и той же реальности;
    - в терминах, которые понятны бизнесу.

### Что даёт канонизация

- Единый **язык для аналитики**: отчёты строятся по canonical-событиям, а не по «как в этой системе называется статус 3».
- Понятная **хронология**: в какой момент что произошло с инициативой.
- Основа для **автоматических алертов и SLA**: легко понять, что «между событием A и B прошло больше времени, чем допустимо».

Для архитекторов и разработчиков это означает появление **явной event-модели домена**, а для бизнеса — возможность смотреть на реальность в одном формате.

---

## Сквозной sales-pipeline для Master-Deal

Следующий шаг — ввести **сквозной sales-pipeline** именно для Master-Deal, а не только для CRM-сделки или кампаний.

Пример возможных стадий:

1. **Lead / Инициатива**  
   Есть интерес клиента, зафиксирован запрос.
2. **Предложение / Концепция**  
   Подготовлено и согласуется решение (high-level медиастратегия).
3. **Медиаплан сформирован**  
   Есть детализированный план по каналам, бюджетам и KPI.
4. **Договор подписан / Условия согласованы**  
   Юридический контур закрыт.
5. **Размещение запущено**  
   Кампании созданы и стартовали в рекламных системах.
6. **Оптимизация и сопровождение**  
   Идёт управление бюджетами, креативами, сегментами.
7. **Подведение итогов / Отчётность**  
   Зафиксированы результаты, подготовлен отчёт.
8. **Закрытие Master-Deal**  
   Инициатива завершена, финансовый результат утверждён.

### Зачем бизнесу такой сквозной pipeline

- **Единая воронка для всех систем**  
  Где бы ни происходило действие (CRM, рекламная платформа, биллинг), Master-Deal всегда находится в одной из понятных бизнес-стадий.

- **Прозрачные метрики на каждом этапе**  
  Можно измерять:
    - конверсию из интереса в подписанный договор,
    - время на подготовку медиаплана,
    - задержку между оплатой и запуском размещения,
    - долю инициатив, которые дошли до финального закрытия.

- **Управление «узкими местами»**  
  Становится видно, где теряется время и деньги:
    - долго согласуется медиаплан,
    - буксует запуск кампаний,
    - задерживается подготовка отчёта.

Для разработчиков и архитекторов сквозной pipeline даёт **опору для проектирования процессов и API**: все интеграции и события стыкуются с этапами Master-Deal, а не живут своей жизнью.

---

## Сквозной SLA: не только «uptime», но и скорость бизнеса

В большинстве компаний SLA воспринимается как:

- доступность систем в процентах,
- время реакции и решения по инцидентам.

С Master-Deal появляется возможность задать **бизнес-ориентированные SLA по этапам воронки**.

Примеры:

- **От запроса клиента до черновика медиаплана** — не более 2 рабочих дней.
- **От утверждения медиаплана до запуска первой кампании** — не более 24 часов.
- **От завершения кампаний до предоставления финального отчёта** — не более 5 рабочих дней.
- **От получения оплаты до полного отражения движения средств по Master-Deal** — не более X часов/дней.

Master-Deal:

- фиксирует, **когда наступили канонические события** (запрос, утверждение, запуск, окончание, отчёт и т.д.);
- позволяет рассчитать **фактические интервалы**;
- даёт возможность:
    - строить отчёты по соблюдению SLA;
    - настраивать алерты, если мы «выходим за коридор».

Это уже не только технический SLA, но и **сквозной SLA бизнеса** — от первого контакта с клиентом до закрытия инициативы.

---

## Что получает бизнес от Master-Deal (в цифрах и ощущениях)

### Единая точка правды по инициативе

Вместо нескольких отчётов из разных систем команда работает с **одной сущностью** — Master-Deal:

- видно, какие договоры и кампании входят в инициативу;
- понятен текущий этап сквозного pipeline;
- есть полный журнал канонических событий.

Менеджер, маркетолог и финансовый директор обсуждают **одну и ту же картину**, а не пытаются свести три разных источника.

---

### Снижение ручного операционного труда

Когда Master-Deal становится центром, часть операций можно:

- **автоматизировать**:
    - создание нужных сущностей при переходе на новый этап pipeline;
    - синхронизацию статусов между CRM, рекламными системами и биллингом;
- **упростить**:
    - минимизировать ручной перенос данных между системами;
    - убрать дублирование ввода.

Результат для бизнеса:

- меньше времени уходит на «сборку картины» по инициативе;
- команда концентрируется на содержании кампаний, а не на рутине.

Для разработчиков это означает предсказуемые интеграции и понятные точки автоматизации.

---

### Быстрое внедрение новых рекламных продуктов

Когда появляется новый формат или канал, вопрос звучит так:

> «Насколько сложно встроить это в существующую воронку и отчётность?»

С Master-Deal:

- **доменная модель уже описана**:
    - как новая сущность вписывается в медиаплан;
    - как её события будут канонизированы;
    - к какой стадии pipeline они относятся.
- **сквозной SLA и отчётность** расширяются, а не переписываются с нуля:
    - добавляются новые типы кампаний и событий;
    - общие правила и этапы остаются прежними.

Это сокращает time-to-market новых продуктов и снижает нагрузку на команду.

---

### Управление рисками и SLA, понятное бизнесу

Master-Deal помогает управлять не только финансовыми, но и операционными рисками:

- заранее видно, какие инициативы **выходят за рамки SLA** по этапам (например, долго не утверждается медиаплан);
- можно оценить **нагрузку на команды** по pipeline (где «пузырь» инициатив на одном этапе);
- технические инциденты (доступность отдельных систем) легче связываются с **конкретным влиянием на воронку и деньги**.

Для менеджмента это важно тем, что:

- разговор про SLA перестаёт быть только про проценты uptime;
- можно планировать и защищать ресурсы исходя из влияния на ключевые этапы воронки.

---

## Как путь одной инициативы выглядит с Master-Deal

Посмотрим сквозной путь — от первого контакта до закрытия.

### 1. Возник запрос от клиента

- В CRM создаётся запись о запросе / лид.
- В Master-Deal создаётся черновик мастер-сделки с минимальным набором данных:
    - клиент,
    - инициатор,
    - ориентировочные цели.

**Каноническое событие:** `MasterDealInitiated`.  
**Pipeline-этап:** Lead / Инициатива.  
Запускается отсчёт первого SLA (например, время на подготовку концепции).

---

### 2. Подготовка и согласование концепции

- Аккаунт и медиапланер готовят высокоуровневую стратегию.
- В Master-Deal фиксируются:
    - гипотезы по каналам и форматам;
    - ориентировочные бюджеты.

**Каноническое событие:** `ConceptPrepared`, затем `ConceptApproved`.  
**Pipeline-этап:** Предложение / Концепция.

Если согласование затягивается, Master-Deal показывает:

- сколько инициатив «застряло» на этом этапе;
- где мы выходим за SLA.

---

### 3. Формирование медиаплана

- Медиапланер создаёт детализированный медиаплан:
    - каналы, площадки, форматы;
    - бюджеты, KPI, сроки;
    - требования к креативам.
- Медиаплан в Master-Deal — это не файл, а структурированный объект.

**Каноническое событие:** `MediaPlanCreated`, `MediaPlanApproved`.  
**Pipeline-этап:** Медиаплан сформирован.

Здесь Master-Deal уже может:

- оценить баланс бюджета по каналам;
- заранее подсветить несостыковки с юридическими или техническими ограничениями.

---

### 4. Договор и юридические условия

- На основе согласованного медиаплана формируется договор / допсоглашение.
- Договор в CRM и Master-Deal **жёстко связаны**:
    - суммы, сроки, объём обязательств.

**Каноническое событие:** `ContractSigned`.  
**Pipeline-этап:** Договор подписан / Условия согласованы.

Master-Deal фиксирует:

- дату подписания;
- условия, влияющие на SLA по запуску и отчётности.

---

### 5. Запуск кампаний

- На основании медиаплана создаются кампании в рекламных системах:
    - часть автоматически через интеграции,
    - часть — полуавтоматически (экспорт/импорт, шаблоны).
- Все кампании привязываются к Master-Deal.

**Канонические события:** `CampaignCreated`, `CampaignLaunched`.  
**Pipeline-этап:** Размещение запущено.

Master-Deal позволяет видеть:

- какие кампании уже стартовали;
- есть ли задержки по запуску относительно SLA;
- соответствуют ли настройки медиаплану.

---

### 6. Сопровождение и оптимизация

- Идут обычные рабочие процессы:
    - корректировки бюджетов;
    - замена креативов;
    - перераспределение между каналами.

Каждое существенное изменение отражается каноническими событиями:

- `BudgetReallocated`,
- `TargetingUpdated`,
- `CampaignPaused`,
- `CampaignResumed`.

**Pipeline-этап:** Оптимизация и сопровождение.

Master-Deal:

- собирает данные о фактических расходах;
- сопоставляет их с планом;
- даёт возможность контролировать отклонения.

---

### 7. Подведение итогов и отчётность

- После окончания размещения:
    - собираются итоговые показатели из рекламных систем;
    - формируется отчёт для клиента;
    - сопоставляются план/факт по KPI и бюджету.

**Канонические события:** `ResultsConsolidated`, `ClientReportIssued`.  
**Pipeline-этап:** Подведение итогов / Отчётность.

Любые задержки на этом этапе тоже измеряются относительно SLA.

---

### 8. Финансовое закрытие Master-Deal

- Закрываются все документы:
    - акты, допсоглашения, корректировки.
- Фиксируется окончательный финансовый результат:
    - выручка,
    - расход,
    - маржа.

**Каноническое событие:** `MasterDealClosed`.  
**Pipeline-этап:** Закрытие Master-Deal.

Теперь можно:

- анализировать эффективность инициативы;
- использовать данные для прогнозов и планирования следующих кампаний.

---

## Что ждать бизнесу от реализации концепции Master-Deal

Реализация Master-Deal — это не только про систему, но и про изменения процессов.

### В краткосрочной перспективе

- Появляется **единый объект обсуждения** между департаментами — «мастер-сделка» вместо набора разрозненных сущностей.
- Упорядочиваются и описываются **ключевые этапы воронки**.
- Становится проще:
    - отвечать на вопросы «где сейчас эта инициатива?»;
    - готовить отчёты по конкретным клиентам и активностям.

### В среднесрочной перспективе

- Появляются **сквозные метрики**:
    - время на этапы pipeline;
    - соблюдение SLA;
    - маржинальность по инициативам.
- Сокращается **ручная работа** по сверке данных между системами.
- Ускоряется запуск **новых продуктов и форматов** — они встраиваются в уже существующую модель.

### В долгосрочной перспективе

- Master-Deal становится опорной точкой для:
    - развития BI и аналитики (в том числе ML-моделей);
    - принятия решений по портфелю инициатив/клиентов;
    - оптимизации оргструктуры (потому что видно, где реально возникают узкие места).

Важно понимать: Master-Deal не отменяет существующие системы, а **надстраивается над ними**, превращая разрозненные процессы в связанный, управляемый контур.

---

## Перспектива внедрения LLM: следующий слой ценности

Как только данные и события вокруг Master-Deal становятся структурированными и канонизированными, появляется пространство для **осмысленного применения LLM** (моделей наподобие ChatGPT) не как игрушки, а как рабочего инструмента.

### 1. Ассистент для аккаунтов и продуктовых команд

LLM может работать поверх данных Master-Deal как «разговорный слой»:

- Ответы на вопросы в свободной форме:
    - «Покажи мастер-сделки по клиенту X с маржой ниже Y за последний квартал».
    - «Какие инициативы сейчас на этапе согласования медиаплана и просрочили SLA?»
- Подготовка кратких сводок:
    - статус инициативы перед созвоном с клиентом;
    - ключевые риски и аномалии (перерасход бюджета, задержки этапов).

**Выгода бизнесу:** меньше времени на поиск информации и подготовку брифов/статусов, выше качество переговоров с клиентом.

---

### 2. Помощник в подготовке медиапланов и предложений

Опираясь на исторические данные по Master-Deal, LLM может:

- предлагать черновики медиастратегий:
    - «client X, сегмент Y, цель — performance» → набор каналов и форматов, которые работали в похожих кейсах;
- генерировать текстовые части предложений:
    - обоснование выбора каналов;
    - формулировки целей и KPI;
    - описания гипотез.

Человек остаётся в роли редактора и ответственного за решение, но стартует не с «чистого листа».

**Выгода бизнесу:** ускорение подготовки предложений и медиапланов, снижение нагрузки на ключевых экспертов.

---

### 3. Разбор документов и коммуникаций

LLM можно использовать для анализа всего, что крутится вокруг Master-Deal, но плохо структурировано:

- брифы от клиентов (почта, документы);
- переписка по согласованию;
- комментарии в задачах.

Возможные сценарии:

- извлечение ключевых требований из брифа и связывание их с полями медиаплана;
- подсветка расхождений:
    - что обещано клиенту в письмах,
    - что зафиксировано в медиаплане и договоре;
- автоматическое формирование черновиков ответов клиенту:
    - с учётом текущего статуса Master-Deal,
    - с аккуратными формулировками и ссылками на факты.

**Выгода бизнесу:** меньше риска «упустить» важные детали из переписки, меньше ручной рутины при работе с документами.

---

### 4. Обнаружение паттернов и рекомендаций по управлению воронкой

На уровне всей воронки Master-Deal LLM может:

- находить закономерности:
    - на каких этапах чаще всего происходят задержки,
    - какие типы клиентов/продуктов чаще выходят за SLA;
- предлагать рекомендации по управлению:
    - какие этапы стоит пересмотреть,
    - где имеет смысл усиливать автоматизацию.

Здесь LLM дополняет классическую аналитику:

- BI даёт цифры и графики,
- LLM помогает перевести их в связный текст:  
  «вот где у нас системная проблема, вот какие сценарии улучшения можно рассмотреть».

**Выгода бизнесу:** более осмысленные решения по оптимизации процессов и ресурсов на основе уже имеющихся данных.

---

### 5. Почему важен именно фундамент Master-Deal

Без Master-Deal и канонизации событий LLM будет:

- работать на сырых, противоречивых данных;
- путаться в терминах разных систем;
- генерировать красивые, но не обязательно корректные ответы.

Master-Deal даёт:

- **единый объект**, вокруг которого можно строить диалоги;
- **структуру и связь данных**, на которую опирается модель;
- **канонические события**, упрощающие объяснение «что произошло и когда».

То есть Master-Deal — это **подготовленная сцена**, а LLM — «умный ведущий», который умеет объяснить, подсветить и подсказать, но не заменяет саму организацию спектакля.

---

## Что можно взять из этого кейса себе

Даже если вы не готовы внедрять Master-Deal целиком, можно использовать отдельные идеи:

1. **Выделить единый бизнес-объект верхнего уровня**  
   Ответить на вопрос: «что для нас аналог Master-Deal?» — инициативы, проекты, заказы, пакеты услуг и т.п.

2. **Ввести сквозной sales-pipeline именно для этого объекта**  
   Сформулировать стадии так, чтобы они описывали путь клиента и инициативы через все системы, а не только внутри CRM.

3. **Описать каноническую модель событий**  
   Понять, какие события действительно важны для бизнеса, и научиться собирать их в одном виде.

4. **Определить бизнес-ориентированные SLA по этапам воронки**  
   Перевести обсуждение SLA из плоскости «процент доступности» в плоскость «через сколько времени клиент получает результат на каждом этапе».

5. **Подготовить фундамент для LLM-применений**  
   Прежде чем запускать «умных ассистентов», привести в порядок данные и события вокруг ключевого бизнес-объекта.

6. **Аккуратно автоматизировать наиболее болезненные участки**  
   Начать с текстовых сценариев, а потом уже выбирать технологии — так проще избежать «архитектуры ради архитектуры».